<!DOCTYPE html>
<html lang="bn">
<head>
    UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,1.0">
    <title>ঈদ মোবারক!</title>
    <link href="https://fonts. initial-scale=1.0">
    <title>ঈদ মোবারক!</title>
    <link href="googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;70https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/0;700&display=swap" rel="stylesheet">
    <link href="https://fonts.css2?family=Roboto:wght@400;700&display=swap" rel="stylesheetgoogleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <style>
        /* General Reset and Base Styles */
        * { margin: 0;" rel="stylesheet">
    <style>
        /* General Reset and Base Styles */
        * { margin padding: 0; box-sizing: border-box; }
        body[lang="bn"] { font: 0; padding: 0; box-sizing: border-box; }
        body[lang="-family: 'Noto Sans Bengali', 'Arial', sans-serif; }
        body[lang="en"]bn"] { font-family: 'Noto Sans Bengali', 'Arial', sans-serif; }
        body[ { font-family: 'Roboto', 'Arial', sans-serif; }
        body {
            background:lang="en"] { font-family: 'Roboto', 'Arial', sans-serif; }
        body { linear-gradient(to bottom, #001c00, #003800, #
            background: linear-gradient(to bottom, #001c00, #0038004d00);
            color: #f0e68c;
            text-align00, #004d00);
            color: #f0e68c;
: center;
            display: flex;
            flex-direction: column;
            align-items: center            text-align: center;
            display: flex;
            flex-direction: column;
            align;
            justify-content: center;
            min-height: 100vh;
            overflow-items: center;
            justify-content: center;
            min-height: 100vh-x: hidden;
            position: relative;
            line-height: 1.6;
        ;
            overflow-x: hidden;
            position: relative;
            line-height: 1.}
        #fireworksCanvas { position: fixed; top: 0; left: 0; width:6;
        }
        #fireworksCanvas { position: fixed; top: 0; left:  100%; height: 100%; z-index: 0; pointer-events: none0; width: 100%; height: 100%; z-index: 0; pointer; }
        .container { background-color: rgba(1, 32, 1, 0-events: none; }
        .container { background-color: rgba(1, 32, .88); padding: 25px 20px; border-radius: 20px;1, 0.88); padding: 25px 20px; border-radius:  box-shadow: 0 8px 25px rgba(255, 215,20px; box-shadow: 0 8px 25px rgba(255,  0, 0.25); max-width: 500px; width: 90215, 0, 0.25); max-width: 500px; width%; border: 2px solid #ffd700; position: relative; z-index: 1; margin:: 90%; border: 2px solid #ffd700; position: relative; z-index 3vh auto; }
        #eidVideo { width: 100%; max-height: : 1; margin: 3vh auto; }
        #eidVideo { width: 100%; max-260px; object-fit: contain; border-radius: 15px; margin-bottom:height: 260px; object-fit: contain; border-radius: 15px; margin 20px; border: 3px solid #ffd700; box-shadow: 0 0 1-bottom: 20px; border: 3px solid #ffd700; box-shadow:2px rgba(255, 215, 0, 0.4); background-color 0 0 12px rgba(255, 215, 0, 0: #001000; }
        .greeting-message { font-size: 2em.4); background-color: #001000; }
        .greeting-message { font-size:; font-weight: 700; color: #fff; margin-bottom: 20px; 2em; font-weight: 700; color: #fff; margin-bottom: 2 text-shadow: 1px 1px 4px rgba(0,0,0,0.60px; text-shadow: 1px 1px 4px rgba(0,0,0,); animation: fadeInGrow 1.5s cubic-bezier(0.25, 0.460.6); animation: fadeInGrow 1.5s cubic-bezier(0.25, 0, 0.45, 0.94); }
        @keyframes fadeInGrow { 0%.46, 0.45, 0.94); }
        @keyframes fadeInGrow { { opacity: 0; transform: scale(0.7) translateY(25px); } 10 0% { opacity: 0; transform: scale(0.7) translateY(25px); }0% { opacity: 1; transform: scale(1) translateY(0); } }
        .input 100% { opacity: 1; transform: scale(1) translateY(0); } }
-group { margin-top: 25px; margin-bottom: 15px; }
                .input-group { margin-top: 25px; margin-bottom: 15px;label { display: block; margin-bottom: 8px; color: #f0e68c; }
        label { display: block; margin-bottom: 8px; color: #f0e68c; font-weight: bold; font-size: 1.05em; }
        input[type="text"] { font-weight: bold; font-size: 1.05em; }
        input[type=" width: 100%; padding: 12px; margin-bottom: 15px; bordertext"] { width: 100%; padding: 12px; margin-bottom: 15: 2px solid #ffd700; border-radius: 10px; font-size:px; border: 2px solid #ffd700; border-radius: 10px; font 1em; background-color: #002a00; color: #fff; }
        -size: 1em; background-color: #002a00; color: #fff;input[type="text"]::placeholder { color: #b0a060; }
        button# }
        input[type="text"]::placeholder { color: #b0a060; }
generateButton { background-color: #25D366; color: #fff; padding: 1        button#generateButton { background-color: #25D366; color: #fff; padding: 12px 20px; border: none; border-radius: 10px; cursor: pointer;2px 20px; border: none; border-radius: 10px; cursor: pointer; font-size: 1em; font-weight: bold; transition: background-color 0.2s font-size: 1em; font-weight: bold; transition: background-color 0.2s ease, transform 0.15s ease, opacity 0.2s ease; letter-spacing:  ease, transform 0.15s ease, opacity 0.2s ease; letter-spacing: 0.5px; box-shadow: 0 3px 7px rgba(0,0,00.5px; box-shadow: 0 3px 7px rgba(0,0,0,0.25); display: flex; align-items: center; justify-content: center; width:,0.25); display: flex; align-items: center; justify-content: center; width: 100%; max-width: 280px; margin: 0 auto; }
         100%; max-width: 280px; margin: 0 auto; }
        button#generateButton svg { width: 20px; height: 20px; margin-right:button#generateButton svg { width: 20px; height: 20px; margin-right: 8px; fill: #fff; }
        button#generateButton:disabled { background-color: # 8px; fill: #fff; }
        button#generateButton:disabled { background-color: #cccccc; color: #666666; cursor: not-allowed; opacity: 0.7cccccc; color: #666666; cursor: not-allowed; opacity: 0.7; }
        button#generateButton:disabled svg { fill: #666666; }
; }
        button#generateButton:disabled svg { fill: #666666; }
        button#generateButton:not(:disabled):hover { background-color: #1DAE54; transform        button#generateButton:not(:disabled):hover { background-color: #1DAE54; transform: translateY(-1px) scale(1.02); box-shadow: 0 5px 1: translateY(-1px) scale(1.02); box-shadow: 0 5px 10px rgba(0,0,0,0.3); }
        button#generateButton:not(:0px rgba(0,0,0,0.3); }
        button#generateButton:not(:disabled):active { transform: translateY(0px) scale(1); }
        #statusMessage { padding: 10disabled):active { transform: translateY(0px) scale(1); }
        #statusMessage { padding: 10px; margin-top: 10px; margin-bottom: 10px; border-radius:px; margin-top: 10px; margin-bottom: 10px; border-radius: 8px; font-size: 0.9em; display: none; opacity: 0; transition: opacity  8px; font-size: 0.9em; display: none; opacity: 0; transition: opacity 0.4s ease-in-out; }
        #statusMessage.success { background-color: #0.4s ease-in-out; }
        #statusMessage.success { background-color: #1DAE54; color: white; } #statusMessage.error { background-color: #d91DAE54; color: white; } #statusMessage.error { background-color: #d9534f; color: white; } #statusMessage.info { background-color: #5bc0534f; color: white; } #statusMessage.info { background-color: #5bc0de; color: white; }
        #generatedLinkContainer { margin-top: 15px; paddingde; color: white; }
        #generatedLinkContainer { margin-top: 15px; padding: 15px; background-color: rgba(0, 0, 0, 0.4: 15px; background-color: rgba(0, 0, 0, 0.4); border-radius: 10px; border: 1px solid #DAA520; display); border-radius: 10px; border: 1px solid #DAA520; display: none; }
        #generatedLinkContainer p { color: #f0e68c; margin-: none; }
        #generatedLinkContainer p { color: #f0e68c; margin-bottom: 8px; font-size: 0.95em; }
        #sharableLinkbottom: 8px; font-size: 0.95em; }
        #sharableLink { width: calc(100% - 110px); padding: 10px; border { width: calc(100% - 110px); padding: 10px; border: 1px solid #DAA520; border-radius: 8px; margin-right:: 1px solid #DAA520; border-radius: 8px; margin-right: 8px; background-color: #002a00; color: #fff; font-size 8px; background-color: #002a00; color: #fff; font-size: 0.95em;}
        button#copyButton { padding: 10px 15: 0.95em;}
        button#copyButton { padding: 10px 15px; background-color: #B8860B; color: #fff; font-size: px; background-color: #B8860B; color: #fff; font-size: 0.95em; border: none; border-radius: 8px; cursor: pointer; transition:0.95em; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.2s ease; }
        button#copyButton:hover { background-color: background-color 0.2s ease; }
        button#copyButton:hover { background-color: #DAA520; }
        footer { margin-top: 15px; font-size:  #DAA520; }
        footer { margin-top: 15px; font-size: 0.85em; color: #f0e68c; position: relative; z-index:0.85em; color: #f0e68c; position: relative; z-index: 1; padding-bottom: 15px; }
        .dateTimeEntry { margin-top:  1; padding-bottom: 15px; }
        .dateTimeEntry { margin-top: 4px; font-size: 0.9em; } .dateTimeEntry span { margin: 0 4px; font-size: 0.9em; } .dateTimeEntry span { margin: 0 3px; }
        @media (max-width: 480px) { .container { padding3px; }
        @media (max-width: 480px) { .container { padding: 20px 15px; margin-top: 2vh; margin-bottom: 2vh; }: 20px 15px; margin-top: 2vh; margin-bottom: 2 #eidVideo { max-height: 220px; margin-bottom: 15px; }vh; } #eidVideo { max-height: 220px; margin-bottom: 15 .greeting-message { font-size: 1.7em; margin-bottom: 15px; } labelpx; } .greeting-message { font-size: 1.7em; margin-bottom: 15px; } label { font-size: 1em; } input[type="text"] { padding: 10 { font-size: 1em; } input[type="text"] { padding: 10px; font-size: 0.95em; } button#generateButton { padding: 10px 15px; fontpx; font-size: 0.95em; } button#generateButton { padding: 10px 1-size: 0.95em; max-width: 250px; } button#generate5px; font-size: 0.95em; max-width: 250px;Button svg { width: 18px; height: 18px; } #statusMessage { font-size:  } button#generateButton svg { width: 18px; height: 18px; } #status0.85em; } #sharableLink, button#copyButton { font-size: 0.Message { font-size: 0.85em; } #sharableLink, button#copyButton { font-size: 0.9em; } footer { font-size: 0.8em; } .dateTimeEntry9em; } footer { font-size: 0.8em; } .dateTimeEntry { font-size: 0 { font-size: 0.85em; } }
        @media (max-width: .85em; } }
        @media (max-width: 360px) { .360px) { .greeting-message { font-size: 1.5em; } #eidgreeting-message { font-size: 1.5em; } #eidVideo { max-height: Video { max-height: 180px; } }
    </style>
</head>
180px; } }
    </style>
</head>
<body lang="bn">
<body lang="bn">
    <canvas id="fireworksCanvas"></canvas>
    <audio id="    <canvas id="fireworksCanvas"></canvas>
    <audio id="backgroundMusic" src="eidmbackgroundMusic" src="eidmubarak.mp3" loop preload="metadata"></audio>

    <divubarak.mp3" loop preload="metadata"></audio>

    <div class="container">
        < class="container">
        <div id="greetingMessage" class="greeting-message"></div>
        <videodiv id="greetingMessage" class="greeting-message"></div>
        <video id="eidVideo" src=" id="eidVideo" src="eidmubarak.mp4" autoplay loop muted playsinline preload="metadata">eidmubarak.mp4" autoplay loop muted playsinline preload="metadata">
            Your browser does not support the video tag.
        </video>
        <div class="input-group">
            <label for
            Your browser does not support the video tag.
        </video>
        <div class="input-group">
            <label for="userNameInput" data-lang-key="yourNameLabel">আপনার নাম লিখ="userNameInput" data-lang-key="yourNameLabel">আপনার নাম লিখুন:</label>
            <ুন:</label>
            <input type="text" id="userNameInput" data-lang-key="nameinput type="text" id="userNameInput" data-lang-key="namePlaceholder" placeholder="এখানে আপনার নাম দিন">
Placeholder" placeholder="এখানে আপনার নাম দিন">
            <button id="generateButton" onclick="generateAndShareLink            <button id="generateButton" onclick="generateAndShareLink()" disabled>
                <svg viewBox="0 0 24 24"><path d="M12.04 2C6.5()" disabled>
                <svg viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 8 2 2.13 6.45 2.13 11.912.13 11.91C2.13 13.66 2.C2.13 13.66 2.61 15.31 361 15.31 3.4 16.78L2 22L.4 16.78L2 22L7.31 20.627.31 20.62C8.72 21.37 10C8.72 21.37 10.33 21.82 .33 21.82 12.04 21.82C1712.04 21.82C17.5 21.82 2.5 21.82 21.95 17.37 21.1.95 17.37 21.95 11.91C21.995 11.91C21.95 6.45 17.55 6.45 17.5 2 12.04 2M12 2 12.04 2M12.04 19.96C1.04 19.96C10.6 19.96 9.20.6 19.96 9.22 19.57 8.03 2 19.57 8.03 18.89L7.62 18.89L7.62 18.65L4.32 19.5318.65L4.32 19.53L5.22 16L5.22 16.32L4.96 15.89C4.32L4.96 15.89C4.14 14.57 3.74 13.07 3.74 11.91C3.7.14 14.57 3.74 13.07 3.74 14 7.36 7.48 3.62 12.04 31.91C3.74 7.36 7.48 3.62.62C16.6 3.62 20.34 7.36 20 12.04 3.62C16.6 3.62 20.34.34 11.91C20.34 16.47 16 7.36 20.34 11.91C20.34 .6 19.96 12.04 19.96M17.16.47 16.6 19.96 12.04 19.96M17.01 14.34C16.76 101 14.34C16.76 14.22 15.56 13.64 15.34 13.56C15.4.22 15.56 13.64 15.34 13.56C15.13 13.48 14.97 113 13.48 14.97 13.44 14.3.44 14.82 13.67C14.67 13.982 13.67C14.67 13.91 14.17 1 14.17 14.51 14.03 14.614.51 14.03 14.67C13.88 7C13.88 14.82 13.73 14.814.82 13.73 14.84 13.48 4 13.48 14.72C13.24 14.614.72C13.24 14.6 12.26 14.2 12.26 14.27 11.11 13.24C107 11.11 13.24C10.21 12.4.21 12.43 9.62 11.47 9.43 9.62 11.47 9.44 11.18C4 11.18C9.27 10.89 9.41 9.27 10.89 9.41 10.76 9.10.76 9.53 10.64C9.64 1053 10.64C9.64 10.53 9.78.53 9.78 10.34 9.91 10.1 10.34 9.91 10.19C10.03 10.9C10.03 10.04 10.07 9.9304 10.07 9.93 10.15 9.76C1 10.15 9.76C10.23 9.59 10.23 9.59 10.19 9.45 10.11 0.19 9.45 10.11 9.33C10.9.33C10.04 9.22 9.46 7.704 9.22 9.46 7.78 9.22 78 9.22 7.23C8.99 6.68 8..23C8.99 6.68 8.76 6.72 76 6.72 8.59 6.72H8.24C88.59 6.72H8.24C8.06 6.72.06 6.72 7.78 6.8 7.54 7.0 7.78 6.8 7.54 7.04C7.3 7.4C7.3 7.28 6.67 7.85 6.628 6.67 7.85 6.67 8.99C67 8.99C6.67 10.13 7.58 1.67 10.13 7.58 11.21 7.71.21 7.7 11.37C7.82 11.5 11.37C7.82 11.53 9.32 13 9.32 13.83 11.59 14.733.83 11.59 14.73C12.14 1C12.14 14.96 12.58 15.094.96 12.58 15.09 12.95 1 12.95 15.19C13.48 15.325.19C13.48 15.32 14.25 1 14.25 15.25 14.58 14.94C145.25 14.58 14.94C14.96 1.96 14.58 15.34 14.04 154.58 15.34 14.04 15.49 1.49 13.81C15.65 13.59 153.81C15.65 13.59 15.57 1.57 13.48 15.5 13.38C15.3.48 15.5 13.38C15.42 1342 13.28 15.2 13.2 14.95.28 15.2 13.2 14.95 13.0 13.08C14.7 12.96 17.25 8C14.7 12.96 17.25 14.4614.46 17.01 14.34Z"/></svg>
                <span data- 17.01 14.34Z"/></svg>
                <span data-lang-key="lang-key="shareButtonText">WhatsApp এ শেয়ার করুন</span>
            </button>
            <div id="shareButtonText">WhatsApp এ শেয়ার করুন</span>
            </button>
            <div id="statusMessage"></div>
            <!-- বিজ্ঞাপন সম্পর্কিত <div id="container-..."> সরানো হয়েছে -->
        </div>
        <div id="generatedstatusMessage"></div>
            <!-- বিজ্ঞাপনের জন্য পূর্বে যোগ করা কোনো div থাকলে, সেটিও সরানো হয়েছে -->
        LinkContainer">
            <p data-lang-key="shareLinkManualText">এই লিঙ্কটি বন্ধুদের সাথে শেয়ার করুন (</div>
        <div id="generatedLinkContainer">
            <p data-lang-key="shareLinkManualযদি অটো-শেয়ার কাজ না করে):</p>
            <input type="text" id="sharableText">এই লিঙ্কটি বন্ধুদের সাথে শেয়ার করুন (যদি অটো-শেয়ার কাজ না করে):</p>
            <inputLink" readonly>
            <button id="copyButton" onclick="copyLink()" data-lang-key=" type="text" id="sharableLink" readonly>
            <button id="copyButton" onclick="copycopyButtonText">কপি করুন</button>
        </div>
    </div>
    <footer>
        <p dataLink()" data-lang-key="copyButtonText">কপি করুন</button>
        </div>
    </div>-lang-key="eidWishesFooter">সবাইকে ঈদের আন্তরিক শুভেচ্ছা!</p>
        <div id
    <footer>
        <p data-lang-key="eidWishesFooter">সবাইকে ঈদের আন্তরিক শুভেচ্ছা="dateTimeDisplay">
            <div class="dateTimeEntry">
                <span id="currentTime"></span> | <!</p>
        <div id="dateTimeDisplay">
            <div class="dateTimeEntry">
                <span id="currentDate"></span>
            </div>
            <div class="dateTimeEntry">
                <span idspan id="currentTime"></span> | <span id="currentDate"></span>
            </div>
            <div class="="currentHijriDate" data-lang-key="hijriDateLoading">ইসলামী তারিখ পরীক্ষা করা হচ্ছে...</span>
            </div>
        </div>
    </footer>

    <script>
    // HijriDate Library (Unchanged)
    (function(global) { /* ... Your HijriDate Library Code ... */ var HijriDate = {};var floor = Math.floor;var replace = function(template, data) {return template.replace(/\{([\w\.]*)\}/g, function(str, key) {var keys = key.split("."),v = data[keys.shift()];for (var i = 0, l = keys.length; i < l; i++) v = v[keys[i]];return (typeof v !== "undefined" && v !== null) ? v : "";});};var monthDays = [30, 29, 30, 29, dateTimeEntry">
                <span id="currentHijriDate" data-lang-key="hijriDateLoading">ইসলামী তারিখ পরীক্ষা করা হচ্ছে...</span>
            </div>
        </div>
    </footer>

    <script>
    // HijriDate Library (Unchanged)
    (function(global) { /* ... Your HijriDate Library Code ... */ var HijriDate = {};var floor = Math.floor;var replace = function(template,30, 29, 30, 29, 30, 29,  data) {return template.replace(/\{([\w\.]*)\}/g, function(str, key) {var keys = key.split("."),v = data[keys.shift()];for (var i = 0, l = keys.length; i < l; i++) v = v[keys[i]];return (typeof v !== "undefined" && v !== null) ? v : "";});};var monthDays = [30, 29, 30, 29, 30, 29, 30, 230, 29];var monthNames = ["Muharram", "Safar", "Rabi'9, 30, 29, 30, 29];var monthNames = ["Muharram", "Safar", "Rabi'ul Awwal", "Rabi'ul Akhir", "Jamadil Awwal", "Jamadil Akhir", "Rajab", "Sha'ban", "Ramadhan", "ul Awwal", "Rabi'ul Akhir", "Jamadil Awwal", "Jamadil AkhShawwal", "Dhul Qa'ada", "Dhul Hijja"];var dayNames = ["Ahad", "Ithnin", "Thulatha", "Arbia'a", "Khamees", "Jomu'a", "Sabt"]; var gLIMIT = 227015;var _HijriDate = function(year, month, date, hour, minute, second, millisecond) {if (year instanceof Date) {var gdate = year;var gYear = gdate.getFullYear(),gMonth = gdate.getMonth(),gDate = gdate.getDate();var julianDayNumber = floor((1461 * (gYear + 4800 + floor((gMonth - 14) / 12))) / 4) + floor((367 * (gMonth - 2 - 12 * (floor((gMonth - 14) / 12)))) / 12) - floor((3 * floor((gYear + 4900 + floor((gMonth - 14) / 12)) / 100)) / 4) + gDate - 32075;var l = julianDayNumber -ir", "Rajab", "Sha'ban", "Ramadhan", "Shawwal", "Dhul Qa'ada", "Dhul Hijja"];var dayNames = ["Ahad", "Ithnin", "Thul 1948440 + 10632;var n = floor((l - atha", "Arbia'a", "Khamees", "Jomu'a", "Sabt"]; var gLIMIT = 227015;var _HijriDate = function(year, month, date, hour, minute, second, millisecond) {if (year instanceof Date) {var gdate = year;var gYear1) / 10631);l = l - 10631 * n +  = gdate.getFullYear(),gMonth = gdate.getMonth(),gDate = gdate.getDate();var julianDayNumber = floor((1461 * (gYear + 4800 + floor((gMonth - 14) / 12))) / 4) + floor((367 * (gMonth - 2 - 12 * (floor((gMonth - 14) / 12)))) / 12) - floor((3 * floor((gYear + 4900 + floor((gMonth - 14) / 12)) / 100)) / 4) + gDate354;var j = (floor((10985 - l) / 5316)) * (floor((50 * l) / 17719)) + (floor(l / 56 - 32075;var l = julianDayNumber - 1948440 + 10632;var n = floor((l - 1) / 10631);l = l - 10631 * n + 354;var j = (floor((10985 - l) / 5316)) * (floor((50 * l) / 17719)) + (floor(l / 5670)) * (floor((43 * l) / 15238));l = l - (floor((30 - j70)) * (floor((43 * l) / 15238));l = l - (floor((30 - j) / 15)) * (floor((17719 * j) / 15)) * (floor((17719 * j) / 50)) - (floor(j / 16)) * (floor((15238 * j) / 4) / 50)) - (floor(j / 16)) * (floor((15238 * j3)) + 29;month = floor((24 * l) / 709); date =) / 43)) + 29;month = floor((24 * l) / 70 l - floor((709 * month) / 24); year = 30 * n + j9); date = l - floor((709 * month) / 24); year = 30 - 30;this._date = date;this._month = month;this._year = year;this * n + j - 30;this._date = date;this._month = month;this._year._hour = gdate.getHours();this._minute = gdate.getMinutes();this._second = gdate.getSeconds(); = year;this._hour = gdate.getHours();this._minute = gdate.getMinutes();this._secondthis._millisecond = gdate.getMilliseconds();var tempGDate = this.toGlobalDate();this._day = temp = gdate.getSeconds();this._millisecond = gdate.getMilliseconds();var tempGDate = this.toGlobalDate();this._day = tempGDate.getDay();return this;}this._date = date;this._monthGDate.getDay();return this;}this._date = date;this._month = month;this._year = year;this._hour = hour || 0;this._minute = minute || 0;this._second = = month;this._year = year;this._hour = hour || 0;this._minute = minute || second || 0;this._millisecond = millisecond || 0;var gdateInstance = this.to 0;this._second = second || 0;this._millisecond = millisecond || 0;varGlobalDate();this._day = gdateInstance.getDay();return this;};_HijriDate.prototype. gdateInstance = this.toGlobalDate();this._day = gdateInstance.getDay();return this;};_HijrigetFullYear = function() { return this._year; };_HijriDate.prototype.getMonth = function() { returnDate.prototype.getFullYear = function() { return this._year; };_HijriDate.prototype.getMonth = this._month; };_HijriDate.prototype.getDate = function() { return this._date; };_ function() { return this._month; };_HijriDate.prototype.getDate = function() { return this._HijriDate.prototype.getHours = function() { return this._hour; };_HijriDate.prototype.date; };_HijriDate.prototype.getHours = function() { return this._hour; };_HijrigetMinutes = function() { return this._minute; };_HijriDate.prototype.getSeconds = function() { returnDate.prototype.getMinutes = function() { return this._minute; };_HijriDate.prototype.getSeconds = this._second; };_HijriDate.prototype.getMilliseconds = function() { return this._millisecond; };_HijriDate.prototype.getDay = function() { return this._day; };_HijriDate.prototype.toGlobalDate = function() {var y = this._year;var m = this._month;var function() { return this._second; };_HijriDate.prototype.getMilliseconds = function() { return this._millisecond; };_HijriDate.prototype.getDay = function() { return this._day; };_ d = this._date;var jd = floor((11 * y + 3) / 30) +HijriDate.prototype.toGlobalDate = function() {var y = this._year;var m = this._month;var d = this._date;var jd = floor((11 * y + 3) /  354 * y + 30 * m - floor((m - 1) / 2)30) + 354 * y + 30 * m - floor((m - 1) + d + 1948440 - 386; var gYear, gMonth, / 2) + d + 1948440 - 386; var gYear gDate;var l,n,i,j;if (jd > 2299160, gMonth, gDate;var l,n,i,j;if (jd > 229) {l = jd + 68569;n = floor((4 * l) / 1469160) {l = jd + 68569;n = floor((4 * l097);l = l - floor((146097 * n + 3) / ) / 146097);l = l - floor((146097 * n4);i = floor((4000 * (l + 1)) / 1461001); + 3) / 4);i = floor((4000 * (l + 1)) / 1461001);l = l - floor((1461 * i) / 4) + 31;j = floor((80 * l) / 2447);gDate = l - floor((2447 * j) / 80);l = floor(j / 11);gMonth = j + 2 - 12 * l;gYear = 100 * (n - 49) + i + l;} else {j = jd + 1402;var k = floor((j - 1) / 1461);l = j - 1461 * k;n = floor((l - 1) / 365) - floor(l / 1461);i = l - 365 * n + 30;gDate = floor((80 * i) / 2447);gMonth = floor(gDate / 11) + i - floor((2447 * floor(gDate / 11)) / 80);gYear = 4 * k + n + floor(gMonth / 3) - 4716;gMonth = (gMonth + 1) % 13;if (gMonth === 0) gMonth = 1;} return new Date(gYear, gMonth - 1, gDate, this._hour, this._minute, this._second, this._millisecond);};_HijriDate.prototype.getMonthName = function() { return monthNames[this._month - 1]; };_HijriDate.prototype.getDayName = function() { return dayNames[this._day]; };HijriDate.JS = { convert: function(gDate) { return new _HijriDate(gDate); }};if (typeof module !== "undefined" && module.exports) { module.exports = HijriDate; } else if (typeof define === "function" && define.amd) { define(HijriDate); } else { global.HijriDate = HijriDate; } }(this));
    </script>

    <script>
        // Translations and other JS variables (Unchanged from your previous version)
        const translations = { /* ... Your translations ... */ 'bn': { 'pageTitle':'ঈদ মোবারক!', 'greetingMessage':'ঈদ মোবারক!', 'greetingMessageFrom':'{name} এর পক্ষ থেকে, ঈদ মোবারক!', 'yourNameLabel':'আপনার নাম লিখুন:', 'namePlaceholder':'এখানে আপনার নাম দিন', 'shareButtonText':'WhatsApp এ শেয়ার করুন', 'shareLinkManualText':'এই লিঙ্কটি বন্ধুদের সাথে শেয়ার করুন (যদি অটো-শেয়ার কাজ না করে):', 'copyButtonText':'কপি করুন', 'eidWishesFooter':'সবাইকে ঈদের আন্তরিক শুভেচ্ছা!', 'timeLabel':'সময়', 'dateLabel':'তারিখ', 'hijriDateLabel':'ইসলামী তারিখ', 'hijriYearSuffix':'হিজরি', 'statusEnterName':'অনুগ্রহ করে আপনার নাম লিখুন।', 'statusShareOptions':'শুভেচ্ছা শেয়ার করার জন্য অপশন দেখানো হয়েছে!', 'statusShareError':'শেয়ার অপশন কাজ করেনি/বাতিল হয়েছে। লিঙ্ক কপি করুন।', 'statusNoAutoShare':'আপনার ব্রাউজার অটো-শেয়ার সাপোর্ট করে না। লিঙ্ক কপি করুন।', 'statusLinkCopied':'লিঙ্ক সফলভাবে কপি করা হয়েছে!', 'statusLinkCopiedFallback':'লিঙ্ক কপি করা হয়েছে (ফলব্যাক)!', 'statusCopyError':'দুঃখিত, লিঙ্ক কপি করা যায়নি। নিজে কপি করে নিন।', 'hijriDateLoading':'ইসলামী তারিখ পরীক্ষা করা হচ্ছে...', 'hijriDateError':'ইসলামী তারিখ রূপান্তরে ত্রুটি।', 'hijriCalcError':'হিজরি মাস গণনায় ত্রুটি।', 'hijriNotLoaded':'ইসলামী ক্যালকুলেটর লোড হয়নি.', 'musicPlayError':'মিউজিক প্লে করা যায়নি। ডিভাইস সাউন্ড চেক করুন।' },'en': { 'pageTitle':'Eid Mubarak!', 'greetingMessage':'Eid Mubarak!', 'greetingMessageFrom':'Eid Mubarak from {name}!', 'yourNameLabel':'Enter your name:', 'namePlaceholder':'Enter your name here', 'shareButtonText':'Share on WhatsApp', 'shareLinkManualText':'Share this link with friends (if auto-share doesn\'t work):', 'copyButtonText':'Copy', 'eidWishesFooter':'Eid greetings to everyone!', 'timeLabel':'Time', 'dateLabel':'Date', 'hijriDateLabel':'Islamic Date', 'hijriYearSuffix':'AH', 'statusEnterName':'Please enter your name.', 'statusShareOptions':'Share options are shown!', 'statusShareError':'Share option failed/cancelled. Please copy the link.', 'statusNoAutoShare':'Your browser does not support auto-share. Please copy the link.', 'statusLinkCopied':'Link copied successfully!', 'statusLinkCopiedFallback':'Link copied (fallback)!l = l - floor((1461 * i) / 4) + 31;j = floor((80 * l) / 2447);gDate = l - floor((2447 * j) / 80);l = floor(j / 11);gMonth = j + 2 -', 'statusCopyError':'Sorry, could not copy the link. Please copy it manually.', 'hijriDateLoading 12 * l;gYear = 100 * (n - 49) + i + l;} else {j = jd + 1402;var k = floor((j - 1) / 1461);l = j - 1461 * k;n = floor((l - 1) / 365) - floor(l / 1461);i = l - 365 *':'Checking Islamic date...', 'hijriDateError':'Error in Islamic date conversion.', 'hijriCalcError':'Error in Hijri month calculation.', 'hijriNotLoaded':'Islamic calendar not loaded.', 'musicPlayError':'Could not play n + 30;gDate = floor((80 * i) / 2447);gMonth = floor(gDate / 11) + i - floor((2447 * floor(gDate / 11)) / 80);gYear = 4 * k + n + floor(gMonth / 3) - 4716;gMonth = (gMonth + 1) % 13;if (gMonth === 0) gMonth = 1;} return new Date(gYear, gMonth - 1, gDate, this._hour, this._minute, this._second, this._millisecond);};_HijriDate.prototype.getMonthName = function() { return monthNames[this._month - 1]; };_HijriDate.prototype.getDayName = function() { return dayNames[this._day]; };HijriDate.JS = { convert: function(gDate) { return new _HijriDate(gDate); music. Check device sound.' }};
        let currentLang = 'bn';
        let userTimeZone = 'Etc/UTC'; 
        let userLocale = 'bn-BD'; 
        
        const backgroundMusic = document }};if (typeof module !== "undefined" && module.exports) { module.exports = HijriDate; } else if (typeof define === "function" && define.amd) { define(HijriDate); } else { global.HijriDate = HijriDate; } }(this));
    </script>

    <script>
        const translations = { /* ... আপনার অনুবাদ ... */ 'bn': { 'pageTitle':'ঈদ মোবারক!', 'greetingMessage':'ঈদ মোবারক!', 'greetingMessageFrom':'{name} এর পক্ষ থেকে, ঈদ মোবারক!', 'yourNameLabel':'আপনার নাম লিখুন:', 'namePlaceholder':'এখানে আপনার নাম দিন', 'shareButtonText':'WhatsApp এ শেয়ার করুন', 'shareLinkManualText':'এই লিঙ্কটি বন্ধুদের সাথে শেয়ার করুন (যদি অটো-শেয়ার কাজ না করে):', 'copyButtonText':'কপি করুন', 'eidWishesFooter':'সবাইকে ঈদের আন্তরিক শুভেচ্ছা!', 'timeLabel':'সময়', 'dateLabel':'তারিখ', 'hijriDateLabel':'ইসলামী তারিখ', 'hijriYearSuffix':'হিজরি', 'statusEnterName':'অনুগ্রহ করে আপনার নাম লিখুন।', 'statusShareOptions':'শুভেচ্ছা শেয়ার করার জন্য অপশন দেখানো হয়েছে!', 'statusShareError':'শেয়ার অপশন কাজ করেনি/বাতিল হয়েছে। লিঙ্ক কপি করুন।', 'statusNoAutoShare':'আপনার ব্রাউজার অটো-শেয়ার সাপোর্ট করে না। লিঙ্ক কপি করুন।', 'statusLinkCopied':'লিঙ্ক সফলভাবে কপি করা হয়েছে!', 'statusLinkCopiedFallback':'লিঙ্ক কপি করা হয়েছে (ফলব্যাক)!', 'statusCopyError':'দুঃখিত, লিঙ্ক কপি করা যায়নি। নিজে কপি করে নিন।', 'hijriDateLoading':'ইসলামী তারিখ পরীক্ষা করা হচ্ছে...', 'hijriDateError':'ইসলামী তারিখ রূপান্তরে ত্রুটি।', 'hijriCalcError':'হিজরি মাস গণনায় ত্রুটি।', 'hijriNotLoaded':'ইসলামী ক্যালকুলেটর লোড হয়নি.', 'musicPlayError':'মিউজিক প্লে করা যায়নি। ডিভাইস সাউন্ড চেক করুন।' },'en': { 'pageTitle':'Eid Mubarak!', 'greetingMessage':'Eid Mubarak!', 'greetingMessageFrom':'Eid Mubarak from {name}!', 'yourNameLabel':'Enter your name:', 'namePlaceholder':'Enter your name here', 'shareButtonText':'Share on WhatsApp', 'shareLinkManualText':'Share this link with friends (if auto-share doesn\'t work):', 'copyButtonText':'Copy', 'eidWishesFooter':'Eid greetings to everyone!', 'timeLabel':'Time', 'dateLabel':'Date', 'hijriDateLabel':'Islamic Date', 'hijriYearSuffix':'AH', 'statusEnterName':'Please enter your name.', 'statusShareOptions':'Share options are shown!', 'statusShareError':'Share option failed/cancelled. Please copy the link.', 'statusNoAutoShare':'Your browser does not support auto-share. Please copy the link.', 'statusLinkCopied':'Link copied successfully!', 'statusLinkCopiedFallback':'Link copied (fallback)!', 'statusCopyError':'Sorry, could not copy the link. Please copy it manually.', 'hijriDateLoading':'Checking Islamic date...', 'hijriDateError':'Error in Islamic date conversion.', 'hijriCalcError':'Error in Hijri month calculation.', 'hijriNotLoaded':'Islamic calendar not loaded.', 'musicPlayError':'Could not play music. Check device sound.' }};
        let currentLang = 'bn';
        let userTimeZone = 'Etc/UTC'; 
        let userLocale = 'bn-BD'; 
        
        const backgroundMusic = document.getElementById('backgroundMusic');
        const userNameInput = document.getElementById('userNameInput');
        const generateButton = document.getElementById('generateButton');
        const statusMessageDiv = document.getElementById('statusMessage');
        let statusTimeout;
        
        const currentTimeEl = document.getElementById('currentTime');
        const currentDateEl = document.getElementById('currentDate');
        const currentHijriDateEl = document.getElementById('currentHijriDate');
        const greetingMessageEl = document.getElementById('greetingMessage');
        const eidVideoEl = document.getElementById('eidVideo'); 

        let timeOffset = 0;
        let initialTimeSynced = false;
        let musicPlayAttemptedOnInteraction = false;

        const bengaliHijriMonths = ["মহররম","সফর","রবিউল আউয়াল","রবিউস সানি","জমাদিউল আউয়াল","জমাদিউস সানি","রজব","শাবান","রমজান","শাওয়াল","জ্বিলকদ","জ্বিলহজ্জ"];
        const englishHijriMonths = ["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'ban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"];

        function getTranslation(key, params = {}) { let text=translations[currentLang]?.[key]||translations['en']?.[key]||key;for(const param in params){text=text.replace(`{${param}}`,params[param]);}return text; }
        function applyTranslations() { document.querySelectorAll('[data-lang-key]').forEach(element=>{const key=element.getAttribute('data-lang-key');if(element.tagName==='INPUT'&&element.hasAttribute('placeholder')){element.placeholder=getTranslation(key);}else{element.textContent=getTranslation(key);}});document.title=getTranslation.getElementById('backgroundMusic');
        const userNameInput = document.getElementById('userNameInput');
        const generateButton = document.getElementById('generateButton');
        const statusMessageDiv = document.getElementById('statusMessage');
        let statusTimeout;
        
        const currentTimeEl = document.getElementById('currentTime');
        const currentDateEl = document.getElementById('currentDate');
        const currentHijriDateEl = document.getElementById('currentHijriDate');
        const greetingMessageEl = document.getElementById('greetingMessage');
        const eidVideoEl = document.getElementById('eidVideo'); 

        let timeOffset = 0;
        let initialTimeSynced = false;
        let musicPlayAttemptedOnInteraction = false;

        const bengaliHijriMonths = ["মহররম","সফর","রবিউল আউয়াল","রবিউস সানি","জমাদিউল আউয়াল","জমাদিউস সানি","রজব","শাবান","রমজান","শাওয়াল","জ্বিলকদ","জ্বিলহজ্জ"];
        const englishHijriMonths = ["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","J('pageTitle');}
        function toNativeNumeral(numStr, lang) { if(lang.startsWith('bn')){const bengaliDigits=['০','১','২','৩','৪','৫','৬','৭','৮','৯'];return String(numStr).split('').map(digit=>/\d/.test(digit)?bengaliDigits[parseInt(digit)]:digit).join('');}return String(numStr); }
        
        async function fetchWithTimeout(resource, options = {}, timeout = 7000) { 
            const controller = new AbortController();
            const id = setTimeout(() => controller.abort(), timeout);
            try {
                const response = await fetch(resource, { ...options, signal: controller.signal });
                clearTimeout(id);
                return response;
            } catch (error) {
                clearTimeout(id);
                throw errorumada al-thani","Rajab","Sha'ban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"];

        // Helper Functions (getTranslation, applyTranslations, toNativeNumeral - Unchanged)
        function getTranslation(key, params = {}) { let text=translations[currentLang]?.[key]||translations['en']?.[key]||key;for(const param in params){text=text.replace(`{${param}}`,params[param]);}return text; }
        function applyTranslations() { document.querySelectorAll('[data-lang-key]').forEach(element=>{const key=element.getAttribute('data-lang-key');if(element.tagName==='INPUT'&&element.hasAttribute('placeholder')){element.placeholder=getTranslation(key);}else{element.textContent=getTranslation(key);}});document.title=getTranslation('pageTitle');}
        function toNativeNumeral(numStr, lang) { if(lang.startsWith('bn')){const bengaliDigits=['০','১','২','৩','৪','৫','৬','৭','৮','৯'];return String(numStr).split('').map(digit=>/\d/.test(digit)?bengaliDigits[parseInt(digit)]:digit).join('');}return String(numStr); }
        
        async function fetchWithTimeout(resource, options = {}, timeout = 7000) { 
            const controller = new AbortController();
            const id = setTimeout(() => controller.abort(), timeout);
            try {
                const response = await fetch(resource, { ...options, signal: controller.signal });
                clearTimeout(id);
                return response;
            } catch (error) {
                clearTimeout(id);
                throw error; 
            }
        }

        async function fetchUserLocationAndSetLanguage() { 
            let browser; 
            }
        }

        async function fetchUserLocationAndSetLanguage() { 
            let browserLang=(navigator.languages&&navigator.languages[0])||navigator.language||'bn-BD';
            currentLang = browserLang.toLowerCase().startsWith('en') ? 'en' : 'bn';
            userLocale = currentLang === 'en' ? 'en-US' : 'bn-BD';
            document.body.lang=currentLang;
            console.log(`App language: ${currentLang}, Locale: ${userLocale}`);
            applyTranslations();
            try{
                console.log("Attempting to fetch timezone from ip-api.com...");
                const response = await fetchWithTimeout('https://ip-api.com/json/?fields=status,message,timezone', { cache: 'no-store' });
                if(!response.ok) throw new Error(`IP API HTTPLang=(navigator.languages&&navigator.languages[0])||navigator.language||'bn-BD';
            currentLang = browserLang.toLowerCase().startsWith('en') ? 'en' : 'bn';
            userLocale = currentLang === 'en' ? 'en-US' : 'bn-BD';
            document.body.lang=currentLang;
            console.log(`App language: ${currentLang}, Locale: ${userLocale}`);
            applyTranslations();

            try{
                console.log("Attempting to fetch timezone from ip-api.com...");
                const response = await fetchWithTimeout('https://ip-api.com/json/?fields=status,message,timezone', { cache: 'no-store' });
                if(!response.ok) throw error! status: ${response.status}`);
                const data=await response.json();
                if(data.status==='success'&&data.timezone){ userTimeZone=data.timezone; console.log('User timezone from IP API:',userTimeZone); } 
                else { console.warn('Failed to get timezone from IP API (Status: '+data.status+'), using default UTC. Message:',data.message); userTimeZone='Etc/UTC';}
            } catch new Error(`IP API HTTP error! status: ${response.status}`);
                const data=await response.json();
                if(data.status==='success'&&data.timezone){
                    userTimeZone=data.timezone;
                    console.log('User timezone from IP API:',userTimeZone);
                } else {
                    console.warn('Failed to get timezone from IP API (Status: '+data.status+'), using default UTC. Message:',data.(error){ console.error("Error fetching user timezone from IP API:", error.name, error.message); userTimeZone='Etc/UTC'; }
        }

        async function fetchCorrectTime() {
            let finalmessage);
                    userTimeZone='Etc/UTC';
                }
            } catch(error){
                console.error("Error fetching user timezone from IP API:", error.name, error.message);
                userTimeZoneTimeZone = userTimeZone || 'Etc/UTC'; 
            let success = false;
            try {
                console.log(`Attempting to fetch time for timezone: ${finalTimeZone}`);
                const response = await fetch='Etc/UTC'; 
            }
        }

        async function fetchCorrectTime() {
            let finalTimeZone = userTimeZone || 'Etc/UTC'; 
            let success = false;
            try {
WithTimeout(`https://worldtimeapi.org/api/timezone/${finalTimeZone}`, { cache: 'no-                console.log(`Attempting to fetch time for timezone: ${finalTimeZone}`);
                const response = await fetchstore' });
                if (response.ok) {
                    const data = await response.json();
                    const serverTimeWithTimeout(`https://worldtimeapi.org/api/timezone/${finalTimeZone}`, { cache: 'no- = new Date(data.utc_datetime); 
                    const clientTimeAtFetch = new Date();
                    timeOffset =store' });
                
                if (response.ok) {
                    const data = await response.json(); serverTime.getTime() - clientTimeAtFetch.getTime();
                    initialTimeSynced = true;
                    user
                    const serverTime = new Date(data.utc_datetime); 
                    const clientTimeAtFetch =TimeZone = data.timezone; 
                    console.log(`Time synced with ${data.timezone}. Offset: ${ new Date();
                    timeOffset = serverTime.getTime() - clientTimeAtFetch.getTime();
                    initialtimeOffset} ms. UserTimezone set to: ${userTimeZone}`);
                    success = true;
                } elseTimeSynced = true;
                    userTimeZone = data.timezone; 
                    console.log(`Time synced with {
                    let errorText = await response.text().catch(() => "Could not get error text");
                     ${data.timezone}. Offset: ${timeOffset} ms. UserTimezone set to: ${userTimeZone}`);
                    console.error(`WorldTimeAPI HTTP error! Status: ${response.status} for timezone: ${finalTimeZone}. Response: ${success = true;
                } else {
                    let errorText = await response.text().catch(() => "errorText}`);
                    if (finalTimeZone !== 'Etc/UTC') {  console.warn(`Falling back to EtcCould not get error text");
                    console.error(`WorldTimeAPI HTTP error! Status: ${response.status} for timezone/UTC.`); userTimeZone = 'Etc/UTC'; return await fetchCorrectTime(); }
                    throw new Error(`World: ${finalTimeZone}. Response: ${errorText}`);
                    if (finalTimeZone !== 'Etc/UTC') { TimeAPI HTTP error! Status: ${response.status} even for Etc/UTC.`);
                }
            }
                        console.warn(`Falling back to Etc/UTC.`);
                        userTimeZone = 'Etc/UTC'; catch (error) {
                console.error("Finally failed to fetch correct time from WorldTimeAPI:", error. 
                        return await fetchCorrectTime(); 
                    }
                    throw new Error(`WorldTimeAPI HTTP error! Statusname, error.message);
                if (error.name === 'AbortError') console.error("Fetch timed out for World: ${response.status} even for Etc/UTC.`);
                }
            } catch (error) {
TimeAPI.");
                console.warn("Using local device time. Ensure device clock is accurate.");
                timeOffset =                 console.error("Finally failed to fetch correct time from WorldTimeAPI:", error.name, error.message);
                0; initialTimeSynced = false;
            }
            updateTimeDate(); return success; 
        }
if (error.name === 'AbortError') console.error("Fetch timed out for WorldTimeAPI.");
                console.warn        
        function initializeDateTimeDisplay() { if(!currentTimeEl||!currentDateEl||!currentHijriDate("Using local device time. Ensure device clock is accurate.");
                timeOffset = 0; 
                initialTimeSyncedEl){console.error("Date/Time elements not found"); return;}updateTimeDate();setInterval(updateTimeDate = false;
            }
            updateTimeDate(); 
            return success; 
        }
        
        function,1000); }
        function updateTimeDate() { const clientNow=new Date();const correctedNow=new initializeDateTimeDisplay() { if(!currentTimeEl||!currentDateEl||!currentHijriDateEl){console. Date(clientNow.getTime()+timeOffset);const timeOptions={hour:'numeric',minute:'2-digit',second:'2error("Date/Time elements not found"); return;}updateTimeDate();setInterval(updateTimeDate,1000); }-digit',hour12:true,timeZone:userTimeZone};let timeString;try{timeString=
        function updateTimeDate() { const clientNow=new Date();const correctedNow=new Date(clientNowcorrectedNow.toLocaleTimeString(userLocale,timeOptions);}catch(e){const fallbackTimeOptions = {hour:'numeric.getTime()+timeOffset);const timeOptions={hour:'numeric',minute:'2-digit',second:'2-digit',hour',minute:'2-digit',second:'2-digit',hour12:true}; timeString=correctedNow12:true,timeZone:userTimeZone};let timeString;try{timeString=correctedNow.toLocale.toLocaleTimeString(undefined, fallbackTimeOptions); console.warn(`Error formatting time with TZ ${userTimeZone}, usingTimeString(userLocale,timeOptions);}catch(e){const fallbackTimeOptions = {hour:'numeric',minute:'2 system TZ. Error: ${e.message}`);}if(currentTimeEl)currentTimeEl.textContent=`${getTranslation('-digit',second:'2-digit',hour12:true}; timeString=correctedNow.toLocaleTimeString(timeLabel')}: ${timeString}`;const dateOptions={day:'numeric',month:'long',year:'numeric',undefined, fallbackTimeOptions); console.warn(`Error formatting time with TZ ${userTimeZone}, using system TZ. Error: ${etimeZone:userTimeZone};let dateString;try{dateString=correctedNow.toLocaleDateString(userLocale,dateOptions.message}`);}if(currentTimeEl)currentTimeEl.textContent=`${getTranslation('timeLabel')}: ${time);}catch(e){const fallbackDateOptions = {day:'numeric',month:'long',year:'numeric'}; dateString}`;const dateOptions={day:'numeric',month:'long',year:'numeric',timeZone:userTimeZone};let dateString=correctedNow.toLocaleDateString(undefined,fallbackDateOptions); console.warn(`Error formatting date with TZ ${userString;try{dateString=correctedNow.toLocaleDateString(userLocale,dateOptions);}catch(e){TimeZone}, using system TZ. Error: ${e.message}`);}if(currentDateEl)currentDateEl.textContent=`${const fallbackDateOptions = {day:'numeric',month:'long',year:'numeric'}; dateString=correctedNow.toLocaleDateStringgetTranslation('dateLabel')}: ${dateString}`;if(currentHijriDateEl){if(typeof Hijri(undefined,fallbackDateOptions); console.warn(`Error formatting date with TZ ${userTimeZone}, using system TZ. Error: ${e.message}`);}if(currentDateEl)currentDateEl.textContent=`${getTranslation('dateLabel')}: ${dateString}`;if(currentHijriDateEl){if(typeof HijriDate!=='undefined'&&HijriDateDate!=='undefined'&&HijriDate.JS&&typeof HijriDate.JS.convert==='function'){try{const hijriInstance=HijriDate.JS.convert(correctedNow);if(hijriInstance&&typeof.JS&&typeof HijriDate.JS.convert==='function'){try{const hijriInstance=Hijri hijriInstance.getDate==='function'){const hijriDay=toNativeNumeral(hijriInstance.getDate(),currentLang);const hijriMonthIndex=hijriInstance.getMonth()-1;const hijriMonths=currentLangDate.JS.convert(correctedNow);if(hijriInstance&&typeof hijriInstance.getDate==='function==='bn'?bengaliHijriMonths:englishHijriMonths;if(hijriMonthIndex>=0&&hijriMonthIndex<hijriMonths.length){const hijriMonthName=hijriMonths[hijri'){const hijriDay=toNativeNumeral(hijriInstance.getDate(),currentLang);const hijriMonthIndexMonthIndex];const hijriYear=toNativeNumeral(hijriInstance.getFullYear(),currentLang);currentHijriDateEl=hijriInstance.getMonth()-1;const hijriMonths=currentLang==='bn'?bengaliHij.textContent=`${getTranslation('hijriDateLabel')}: ${hijriDay} ${hijriMonthName},riMonths:englishHijriMonths;if(hijriMonthIndex>=0&&hijriMonthIndex<hijri ${hijriYear} ${getTranslation('hijriYearSuffix')}`;}}else{throw new Error("HijriDate conversion returnedMonths.length){const hijriMonthName=hijriMonths[hijriMonthIndex];const hijriYear= invalid object.");}}catch(e){currentHijriDateEl.textContent=getTranslation('hijriDateError');toNativeNumeral(hijriInstance.getFullYear(),currentLang);currentHijriDateEl.textContent=`${getTranslation('hijriDateLabel')}: ${hijriDay} ${hijriMonthName}, ${hijriYear} ${getTranslationconsole.error("Error updating Hijri date:", e);}}else{currentHijriDateEl.textContent=getTranslation('hijriNotLoaded');}}}
        
        function attemptMusicPlay(interactionType = "unknown") {('hijriYearSuffix')}`;}}else{throw new Error("HijriDate conversion returned invalid object.");}}catch(e){
            if (backgroundMusic && backgroundMusic.paused) {
                console.log(`Attempting music play due to ${interactioncurrentHijriDateEl.textContent=getTranslation('hijriDateError');console.error("Error updating Hijri date:", e);}}else{currentHijriDateEl.textContent=getTranslation('hijriNotLoaded');}}}Type} interaction...`);
                const playPromise = backgroundMusic.play();
                if (playPromise !== undefined
        
        function attemptMusicPlay(interactionType = "unknown") {
            if (backgroundMusic && backgroundMusic.) {
                    playPromise.then(() => {
                        console.log(`Music started successfully via ${interactionTypepaused) {
                console.log(`Attempting music play due to ${interactionType} interaction...`);
                } interaction.`);
                        document.body.removeEventListener('click', handleFirstUserInteractionToken, { capture: trueconst playPromise = backgroundMusic.play();
                if (playPromise !== undefined) {
                    playPromise. });
                        document.body.removeEventListener('touchstart', handleFirstUserInteractionToken, { capture: true });
                    }).catch(error => {
                        console.warn(`Music play failed via ${interactionType} interaction:`,then(() => {
                        console.log(`Music started successfully via ${interactionType} interaction.`);
                        document. error.name, error.message);
                    });
                }
            }
        }
        const handlebody.removeEventListener('click', handleFirstUserInteractionToken, { capture: true });
                        document.body.removeEventListener('FirstUserInteractionToken = function(event) {
            console.log(`First user interaction (type: ${event.touchstart', handleFirstUserInteractionToken, { capture: true });
                    }).catch(error => {
                        consoletype}) on body detected.`);
            if (!musicPlayAttemptedOnInteraction) { 
                attemptMusicPlay(`.warn(`Music play failed via ${interactionType} interaction:`, error.name, error.message);
                    });
                }
            }
        }
        
        const handleFirstUserInteractionToken = function(event) {
general body ${event.type}`);
                musicPlayAttemptedOnInteraction = true;
            }
        };

        window            console.log(`First user interaction (type: ${event.type}) on body detected.`);
            if (!music.onload = async function() {
            console.log("Window onload sequence started.");
            await fetchUserLocationPlayAttemptedOnInteraction) { 
                attemptMusicPlay(`general body ${event.type}`);
                musicPlayAndSetLanguage(); 
            await fetchCorrectTime(); 
            const urlParams = new URLSearchParams(windowAttemptedOnInteraction = true;
            }
        };

        window.onload = async function() {
.location.search);
            const sharerNameParam = urlParams.get('name');
            greetingMessageEl.textContent = sharerNameParam ? getTranslation('greetingMessageFrom', {name: decodeURIComponent(sharerNameParam            console.log("Window onload sequence started.");
            await fetchUserLocationAndSetLanguage(); 
            await fetchCorrectTime(); 
            
            const urlParams = new URLSearchParams(window.location.search);
            const sharerNameParam = urlParams.get('name');
            
            greetingMessageEl.textContent = sharerNameParam 
                ? getTranslation('greetingMessageFrom', {name: decodeURIComponent(sharerNameParam)}) 
                : getTranslation('greetingMessage');
            greetingMessageEl.style.animation = 'none';
            greetingMessageEl.offsetHeight; 
            greetingMessageEl.style.animation = null;

            if (backgroundMusic) {
                console.log("Attempting initial background music play (unmuted)...");
                const playPromise = backgroundMusic.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log("Background music autoplay (unmuted) successful on load.");
                    }).catch(error => { 
                        console.warn("Background music autoplay (unmuted) prevented on load:", error.name, error.message);
                        if (error.name === 'NotAllowedError') { 
                            console.log("Adding general click/touch listeners to body for music play (capture phase).");
                            document.body.addEventListener('click', handleFirstUserInteractionToken, { once: true, capture: true });
                            document.body.addEventListener('touchstart', handleFirstUserInteractionToken, { once: true, capture: true });
                        }
                    });
                }
            } else {
                console.error("backgroundMusic element not found!");
            }
            
            if (eidVideoEl) {
                const videoPlayPromise = eidVideoEl.play();
                 if (videoPlayPromise !== undefined) {
                    videoPlayPromise.catch(error => {
                        console.warn("Video autoplay was prevented:", error.name, error.message);
                    });
                }
                eidVideoEl.onerror = () => console.error("Error loading video.");
            }

            generateButton.disabled = true;
            startFireworks();
            animateFireworks();
            initializeDateTimeDisplay(); 
            console.log("Window onload sequence finished.");
        };

        userNameInput.addEventListener('input', () => { generateButton.disabled = userNameInput.value.trim() === ""; });
        function showStatusMessage(messageKey, type = 'info', duration = 3000, params = {}) { clearTimeout(statusTimeout); statusMessageDiv.textContent = getTranslation(messageKey, params); statusMessageDiv.className = ''; statusMessageDiv.classList.add(type); statusMessageDiv.style.display = 'block'; setTimeout(() => { statusMessageDiv.style.opacity = '1'; }, 10); statusTimeout = setTimeout(() => { statusMessageDiv.style.opacity = '0'; setTimeout(() => { statusMessageDiv.style.display = 'none'; }, 500); }, duration); }
        async function generateAndShareLink() { const userName = userNameInput.value.trim(); if (userName === "") { showStatusMessage("statusEnterName", "error"); return; } attemptMusicPlay("share button click"); const currentUrl = new URL(window.location.href); currentUrl.searchParams.set('name', userName); const newLink = currentUrl.toString(); const sharerNameForMessage = decodeURIComponent(userName); const shareText = getTranslation('greetingMessageFrom', {name: sharerNameForMessage}) + ` ${getTranslation('pageTitle')}! ${newLink}`; if (navigator.share) { try { await navigator.share({ title: getTranslation('pageTitle'), text: shareText, url: newLink }); showStatusMessage('statusShareOptions', 'success', 1000); document.getElementById('generatedLinkContainer').style.display = 'none'; } catch (error) { console.error("Error during navigator.share:", error); showManualLink(newLink); showStatusMessage('statusShareError', 'info', 4000); } } else { showManualLink(newLink); showStatusMessage('statusNoAutoShare', 'info', 4000); } userNameInput.value = ''; generateButton.disabled = true; }
        function showManualLink(link) { const sharableLinkInput = document.getElementById('sharableLink'); sharableLinkInput.value = link; document.getElementById('generatedLinkContainer').style.display = 'block'; }
        function copyLink() { const sharableLinkInput = document.getElementById('sharableLink'); sharableLinkInput.select(); sharableLinkInput.setSelectionRange(0, 99999); try { navigator.clipboard.writeText(sharableLinkInput.value) .then(() => { showStatusMessage("statusLink)}) : getTranslation('greetingMessage');
            greetingMessageEl.style.animation = 'none'; greetingMessageEl.offsetHeight; greetingMessageEl.style.animation = null;
            if (backgroundMusic) {
                console.log("Attempting initial background music play (unmuted)...");
                const playPromise = backgroundMusic.play();
Copied", "success"); }) .catch(err => { console.error("Clipboard API copy failed:", err);                if (playPromise !== undefined) {
                    playPromise.then(() => console.log("Background music autoplay (unmuted) successful on load.")).catch(error => { 
                        console.warn("Background music autoplay (unmuted) prevented on load:", error.name, error.message);
                        if (error.name === 'NotAllowedError') { 
                            console.log("Adding general click/touch listeners to body for music play (capture phase).");
                            document.body.addEventListener('click', handleFirstUserInteractionToken, { once: true, capture: true if(document.execCommand('copy')) { showStatusMessage("statusLinkCopiedFallback", "success"); } });
                            document.body.addEventListener('touchstart', handleFirstUserInteractionToken, { once: true, capture: true });
                        }
                    });
                }
            } else { console.error("backgroundMusic element not found!"); }
            if (eidVideoEl) {
                const videoPlayPromise = eidVideoEl.play();
                 if (videoPlayPromise !== undefined) { videoPlayPromise.catch(error => console.warn("Video autoplay was prevented:", error.name, error.message));}
                eidVideoEl.onerror = () => console.error("Error loading video.");
            }
            generateButton.disabled = true; startFireworks(); animateFireworks(); initializeDateTime else { showStatusMessage("statusCopyError", "error", 4000); } }); } catch (err) { console.error("Clipboard API not available or other error:", err); if(document.execCommand('copy')) { showStatusMessage("statusLinkCopiedFallback", "success"); } else { showStatusMessage("statusDisplay(); 
            console.log("Window onload sequence finished.");
        };

        userNameInput.addEventListener('input', () => { generateButton.disabled = userNameInput.value.trim() === ""; });
        function showStatusMessage(messageKey, type = 'info', duration = 3000, params = {}) { clearTimeout(statusTimeout); statusMessageDiv.textContent = getTranslation(messageKey, params); statusMessageDiv.className = ''; statusMessageDiv.classList.add(type); statusMessageDiv.style.display = 'block'; setTimeout(() => { statusMessageDiv.style.opacity = '1'; }, 10); statusTimeout = setTimeout(() => { statusMessageDiv.style.opacity = '0'; setTimeout(() => { statusMessageDiv.style.display = 'none'; }, 500); }, duration); }
        async function generateAndShareLink() { const userName = userNameInput.value.trim(); if (userName === "") { showStatusMessage("statusEnterName", "error"); return; } attemptMusicPlay("share button click"); const currentUrl = new URL(window.location.href); currentUrl.searchParamsCopyError", "error", 4000); } } }
        
        // --- Fireworks Animation Code (Unchanged) ---
        const canvas = document.getElementById('fireworksCanvas'); const ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight; let fireworks = [];.set('name', userName); const newLink = currentUrl.toString(); const sharerNameForMessage = decodeURIComponent(userName); const shareText = getTranslation('greetingMessageFrom', {name: sharerNameForMessage}) + ` ${getTranslation('pageTitle')}! ${newLink}`; if (navigator.share) { try { await navigator.share({ title: getTranslation('pageTitle'), text: shareText, url: newLink }); showStatusMessage('statusShareOptions', 'success', 1000); document.getElementById('generatedLinkContainer').style.display = 'none'; } catch (error) { console.error("Error during navigator.share:", error); showManualLink(newLink); showStatusMessage('statusShareError', 'info', 4000); } } else { showManualLink(newLink); showStatusMessage('statusNoAutoShare', 'info', 4000); } userNameInput.value = ''; generateButton.disabled = true; }
        function showManualLink(link) { const sharableLinkInput = document.getElementById('sharableLink'); sharableLinkInput.value = link; document.getElementById('generatedLinkContainer').style.display = 'block'; }
        function copyLink() { const sharableLinkInput = document.getElementById('sharableLink'); sharableLinkInput.select(); sharableLinkInput.setSelectionRange(0, 99999); try { navigator.clipboard.writeText(shar let particles = []; const fireworkLaunchProbability = 0.025; const maxFireworksAtOnce = 8;
        function Firework(startX, startY, targetX, targetY) { this.x = startX; this.y = startY; this.startX = startX; this.startY = startY; this.targetX = targetX; this.targetY = targetY; this.distanceToTarget = Math.sqrt(Math.pow(targetX - startX, 2) + Math.pow(targetY - startableLinkInput.value) .then(() => { showStatusMessage("statusLinkCopied", "success"); }) .catch(err => { console.error("Clipboard API copy failed:", err); if(document.execCommand('copy')) { showStatusMessage("statusLinkCopiedFallback", "success"); } else { showStatusMessage("statusCopyError", "error", 4000); } }); } catch (err) { console.error("Clipboard API not available or other error:", err); if(document.execCommand('copy')) { showStatusMessage("statusLinkCopiedFallback", "success"); } else { showStatusMessage("statusCopyError", "error", 4000); } } }
        
        // --- Fireworks Animation Code (Unchanged) ---
        const canvas = document.getElementById('fireworksCanvas'); const ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight; let fireworks = []; let particles = []; const fireworkLaunchProbability = 0.025; const maxFireworksAtOnce = 8;
        function Firework(startX, startY, targetX, targetY) { this.x = startX; this.y = startY; this.startX = startX; this.startY = startY; this.targetX = targetX; this.targetY = targetY; this.distanceToTarget = Math.sqrt(Math.pow(targetX - startX, 2) + Math.pow(targetY - startY, 2)); this.distanceTraveled = 0; this.trail = []; this.angle = Math.atan2(targetY - startY, targetX - startY, 2)); this.distanceTraveled = 0; this.trail = []; this.angle = Math.atan2(targetY - startY, targetX - startX); this.speed = 4; this.acceleration = 1.05 + Math.random() * 0.03; this.brightness = Math.random() * 70 + 50; this.color = `hsl(${Math.random()*360}, 100%, ${this.brightness}%)`; this.lineWidth = Math.random()*2.X); this.speed = 4; this.acceleration = 1.05 + Math.random() * 0.03; this.brightness = Math.random() * 70 + 50; this.color = `hsl(${Math.random()*360}, 100%, ${this.brightness}%)`; this.lineWidth = Math.random()*2.5+1.5; } Firework.prototype.update = function(index) { this.trail.push({x:this.x, y:this.y}); if (this.trail.length > 8) this.trail.shift(); this.speed *= this.acceleration; let vx = Math.cos(this.angle) * this.speed; let vy = Math.sin(this.angle) * this.speed; this.distanceTraveled = Math.sqrt(Math.pow(this.x - this.startX, 2) + Math.pow(this.y - this.startY, 2));5+1.5; } Firework.prototype.update = function(index) { this.trail.push({x:this.x, y:this.y}); if (this.trail.length > 8) this.trail.shift(); this.speed *= this.acceleration; let vx = Math.cos(this.angle) * this.speed; let vy = Math.sin(this.angle) * this.speed; this.distanceTraveled if (this.distanceTraveled >= this.distanceToTarget || this.y < this.targetY) { createParticles(this.targetX, this.targetY, this.color); fireworks.splice(index,  = Math.sqrt(Math.pow(this.x - this.startX, 2) + Math.pow(this.y - this.startY, 2)); if (this.distanceTraveled >= this.distanceTo1); } else { this.x += vx; this.y += vy; } }; Firework.prototype.draw = function() { ctx.beginPath(); if(this.trail.length > 0) { ctx.moveToTarget || this.y < this.targetY) { createParticles(this.targetX, this.targetY, this.color); fireworks.splice(index, 1); } else { this.x += vx; this(this.trail[this.trail.length-1].x, this.trail[this.trail.length-1].y); } else { ctx.moveTo(this.x - Math.cos(this.angle)*.y += vy; } }; Firework.prototype.draw = function() { ctx.beginPath(); if(this10, this.y - Math.sin(this.angle)*10); } ctx.lineTo(this.trail.length > 0) { ctx.moveTo(this.trail[this.trail.length-1.x, this.y); ctx.strokeStyle = this.color; ctx.lineWidth = this.lineWidth; ctx].x, this.trail[this.trail.length-1].y); } else { ctx.moveTo(.stroke(); ctx.beginPath(); ctx.arc(this.x, this.y, this.lineWidth+2, 0, Math.PI*2); ctx.fillStyle = this.color.replace(')', ', 0.4)').replace('hsl', 'hsla'); ctx.fill(); };
        function Particle(x,ythis.x - Math.cos(this.angle)*10, this.y - Math.sin(this.angle)*10); } ctx.lineTo(this.x, this.y); ctx.strokeStyle = this,color) { this.x=x; this.y=y; this.angle=Math.random()*.color; ctx.lineWidth = this.lineWidth; ctx.stroke(); ctx.beginPath(); ctx.arc(thisMath.PI*2; this.speed=Math.random()*18+5; this.friction=0.x, this.y, this.lineWidth+2, 0, Math.PI*2); ctx..96+Math.random()*0.01; this.gravity=0.9+Math.randomfillStyle = this.color.replace(')', ', 0.4)').replace('hsl', 'hsla'); ctx()*0.6; this.alpha=1; this.decay=Math.random()*0.025.fill(); };
        function Particle(x,y,color) { this.x=x; this.+0.020; this.color=color; this.size=Math.random()*3.5y=y; this.angle=Math.random()*Math.PI*2; this.speed=Math.+1.5; } Particle.prototype.update = function(index) { this.speed *= this.friction; this.x += Math.cos(this.angle)*this.speed; this.y += Math.sin(this.angle)*this.speed + this.gravity; this.alpha -= this.decay; if (this.alpha <= this.decay) { particles.splice(index,1); } }; Particle.prototype.draw = function()random()*18+5; this.friction=0.96+Math.random()*0.01 { ctx.save(); ctx.globalAlpha = this.alpha; ctx.beginPath(); ctx.arc(this.; this.gravity=0.9+Math.random()*0.6; this.alpha=1; this.decay=Math.random()*0.025+0.020; this.color=color; this.size=Math.random()*3.5+1.5; } Particle.prototype.update =x, this.y, this.size, 0, Math.PI*2, false); ctx.fillStyle = this.color; ctx.fill(); ctx.restore(); };
        function createParticles(x,y, function(index) { this.speed *= this.friction; this.x += Math.cos(this.angle)*this.speed; this.y += Math.sin(this.angle)*this.speed + this.gravity; this.alpha -= this.decay; if (this.alpha <= this.decay) { particles.splice(index,color) { let particleCount = 120 + Math.floor(Math.random()*60); while1); } }; Particle.prototype.draw = function() { ctx.save(); ctx.globalAlpha = this.alpha; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0(particleCount--) { particles.push(new Particle(x,y,color)); } } function launchFirework, Math.PI*2, false); ctx.fillStyle = this.color; ctx.fill(); ctx.restore() { if (fireworks.length < maxFireworksAtOnce && Math.random() < fireworkLaunchProbability) { const startX = Math.random()*canvas.width/2 + canvas.width/4; const startY = canvas.(); };
        function createParticles(x,y,color) { let particleCount = 120 + Math.floor(Math.random()*60); while(particleCount--) { particles.push(new Particle(height; const targetX = Math.random()*canvas.width; const targetY = Math.random()*(canvas.height/1.8); fireworks.push(new Firework(startX,startY,targetX,targetYx,y,color)); } } function launchFirework() { if (fireworks.length < maxFireworksAtOnce && Math.random() < fireworkLaunchProbability) { const startX = Math.random()*canvas.width/2 +)); } }
        function startFireworks() { for(let i=0; i<4+Math.floor(Math.random()*4); i++) { setTimeout(() => { const startX = Math.random()*canvas. canvas.width/4; const startY = canvas.height; const targetX = Math.random()*canvas.width/2 + canvas.width/4; const startY = canvas.height; const targetX = Math.width; const targetY = Math.random()*(canvas.height/1.8); fireworks.push(newrandom()*canvas.width; const targetY = Math.random()*(canvas.height/1.8); fireworks Firework(startX,startY,targetX,targetY)); } }
        function startFireworks() { for(.push(new Firework(startX,startY,targetX,targetY)); }, i*(150+let i=0; i<4+Math.floor(Math.random()*4); i++) { setTimeout(()Math.random()*200)); } }
        function animateFireworks() { requestAnimationFrame(animateFireworks); ctx => { const startX = Math.random()*canvas.width/2 + canvas.width/4; const start.fillStyle = 'rgba(0,0,0,0.12)'; ctx.fillRect(0,0Y = canvas.height; const targetX = Math.random()*canvas.width; const targetY = Math.,canvas.width,canvas.height); launchFirework(); fireworks.forEach((firework,index) => {fireworkrandom()*(canvas.height/1.8); fireworks.push(new Firework(startX,startY,target.update(index); firework.draw();}); particles.forEach((particle,index) => {particle.updateX,targetY)); }, i*(150+Math.random()*200)); } }
        (index); particle.draw();}); } window.addEventListener('resize', () => { canvas.width = window.function animateFireworks() { requestAnimationFrame(animateFireworks); ctx.fillStyle = 'rgba(0,0,0,0.12)'; ctx.fillRect(0,0,canvas.width,canvas.height); launchFireworkinnerWidth; canvas.height = window.innerHeight; });
    
        // কোনো বিজ্ঞাপন স্ক্রিপ্ট বা placeholder এখানে(); fireworks.forEach((firework,index) => {firework.update(index); firework.draw(); রাখা হয়নি
    </script>
</body>
</html>
